# First stage: Install Python dependencies
FROM python:3.7 AS builder
ENV PYTHONBUFFERED 1
WORKDIR /app
COPY ./requirements.txt /app/requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# Second stage: Run Streamlit application
FROM python:3.7
ENV PYTHONBUFFERED 1
WORKDIR /app
COPY --from=builder /app /app  
# Copy Python dependencies from the first stage
EXPOSE 8501  
# Streamlit default port
CMD ["streamlit", "run", "--server.enableCORS=false", "--server.port=8501", "--browser.serverAddress=0.0.0.0", "app.py"]
